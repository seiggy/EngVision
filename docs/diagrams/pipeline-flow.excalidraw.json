{
  "type": "excalidraw",
  "version": 2,
  "source": "https://excalidraw.com",
  "elements": [
    {
      "id": "title",
      "type": "text",
      "x": 200,
      "y": 10,
      "width": 500,
      "height": 30,
      "text": "EngVision Analysis Pipeline Flow",
      "fontSize": 20,
      "fontFamily": 1,
      "textAlign": "center",
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1
    },
    {
      "id": "step1-box",
      "type": "rectangle",
      "x": 40,
      "y": 60,
      "width": 160,
      "height": 60,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#a5d8ff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 },
      "boundElements": [{ "id": "step1-label", "type": "text" }]
    },
    {
      "id": "step1-label",
      "type": "text",
      "x": 55,
      "y": 70,
      "width": 130,
      "height": 40,
      "text": "1. Render PDF\n(PyMuPDF 300 DPI)",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "step1-box",
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1
    },
    {
      "id": "arrow-1-2",
      "type": "arrow",
      "x": 200,
      "y": 90,
      "width": 40,
      "height": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "points": [[0, 0], [40, 0]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "step2-box",
      "type": "rectangle",
      "x": 240,
      "y": 60,
      "width": 160,
      "height": 60,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#b2f2bb",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 },
      "boundElements": [{ "id": "step2-label", "type": "text" }]
    },
    {
      "id": "step2-label",
      "type": "text",
      "x": 255,
      "y": 70,
      "width": 130,
      "height": 40,
      "text": "2. Detect Bubbles\n(OpenCV Hough)",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "step2-box",
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1
    },
    {
      "id": "arrow-2-3",
      "type": "arrow",
      "x": 400,
      "y": 90,
      "width": 40,
      "height": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "points": [[0, 0], [40, 0]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "step3-box",
      "type": "rectangle",
      "x": 440,
      "y": 60,
      "width": 160,
      "height": 60,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#d0bfff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 },
      "boundElements": [{ "id": "step3-label", "type": "text" }]
    },
    {
      "id": "step3-label",
      "type": "text",
      "x": 455,
      "y": 70,
      "width": 130,
      "height": 40,
      "text": "3. OCR\n(Tesseract bubbles+table)",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "step3-box",
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1
    },
    {
      "id": "arrow-3-4",
      "type": "arrow",
      "x": 600,
      "y": 90,
      "width": 40,
      "height": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "points": [[0, 0], [40, 0]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "step4-box",
      "type": "rectangle",
      "x": 640,
      "y": 60,
      "width": 160,
      "height": 60,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#eebefa",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 },
      "boundElements": [{ "id": "step4-label", "type": "text" }]
    },
    {
      "id": "step4-label",
      "type": "text",
      "x": 655,
      "y": 70,
      "width": 130,
      "height": 40,
      "text": "4. Trace Leaders\n(HoughLinesP)",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "step4-box",
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1
    },
    {
      "id": "arrow-4-5",
      "type": "arrow",
      "x": 720,
      "y": 120,
      "width": 0,
      "height": 40,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "points": [[0, 0], [0, 40]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "step5-box",
      "type": "rectangle",
      "x": 600,
      "y": 160,
      "width": 240,
      "height": 80,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffd8a8",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 },
      "boundElements": [{ "id": "step5-label", "type": "text" }]
    },
    {
      "id": "step5-label",
      "type": "text",
      "x": 615,
      "y": 168,
      "width": 210,
      "height": 64,
      "text": "5. LLM Validate\n(GPT-5.3-codex vision)\nCrop drawing region +\ntable dimension → match?",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "step5-box",
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1
    },
    {
      "id": "arrow-5-6",
      "type": "arrow",
      "x": 600,
      "y": 200,
      "width": 60,
      "height": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "points": [[0, 0], [-60, 0]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "step6-box",
      "type": "rectangle",
      "x": 340,
      "y": 165,
      "width": 200,
      "height": 70,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffec99",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 },
      "boundElements": [{ "id": "step6-label", "type": "text" }]
    },
    {
      "id": "step6-label",
      "type": "text",
      "x": 355,
      "y": 175,
      "width": 170,
      "height": 50,
      "text": "6. Merge Results\nTable OCR + LLM validation\n→ confidence scored",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "step6-box",
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1
    },
    {
      "id": "arrow-6-7",
      "type": "arrow",
      "x": 340,
      "y": 200,
      "width": 60,
      "height": 0,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "points": [[0, 0], [-60, 0]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "step7-box",
      "type": "rectangle",
      "x": 100,
      "y": 165,
      "width": 180,
      "height": 70,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#ffc9c9",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 },
      "boundElements": [{ "id": "step7-label", "type": "text" }]
    },
    {
      "id": "step7-label",
      "type": "text",
      "x": 115,
      "y": 175,
      "width": 150,
      "height": 50,
      "text": "7. Overlay\nDraw bounding boxes\n+ labels on page image",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "step7-box",
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1
    },
    {
      "id": "arrow-7-out",
      "type": "arrow",
      "x": 190,
      "y": 235,
      "width": 0,
      "height": 35,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "points": [[0, 0], [0, 35]],
      "startArrowhead": null,
      "endArrowhead": "arrow"
    },
    {
      "id": "output-box",
      "type": "rectangle",
      "x": 100,
      "y": 270,
      "width": 180,
      "height": 60,
      "strokeColor": "#1e1e1e",
      "backgroundColor": "#a5d8ff",
      "fillStyle": "solid",
      "strokeWidth": 2,
      "roundness": { "type": 3 },
      "boundElements": [{ "id": "output-label", "type": "text" }]
    },
    {
      "id": "output-label",
      "type": "text",
      "x": 115,
      "y": 278,
      "width": 150,
      "height": 44,
      "text": "Output\nJSON result +\nannotated overlay",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "center",
      "verticalAlign": "middle",
      "containerId": "output-box",
      "strokeColor": "#1e1e1e",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1
    },
    {
      "id": "detail-box",
      "type": "rectangle",
      "x": 40,
      "y": 360,
      "width": 800,
      "height": 100,
      "strokeColor": "#868e96",
      "backgroundColor": "#f8f9fa",
      "fillStyle": "solid",
      "strokeWidth": 1,
      "roundness": { "type": 3 }
    },
    {
      "id": "detail-text",
      "type": "text",
      "x": 55,
      "y": 370,
      "width": 770,
      "height": 80,
      "text": "Key insight: The LLM does NOT re-read the table. Tesseract OCR is the sole table extraction source.\nThe LLM examines the drawing region each bubble's leader line points to and validates that\nthe dimension annotation on the drawing matches the table value. This catches OCR errors and\nverifies that the correct bubble number maps to the correct dimension on the actual drawing.",
      "fontSize": 12,
      "fontFamily": 1,
      "textAlign": "left",
      "strokeColor": "#868e96",
      "backgroundColor": "transparent",
      "fillStyle": "solid",
      "strokeWidth": 1
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  },
  "files": {}
}
